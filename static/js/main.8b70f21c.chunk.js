(this.webpackJsonppersonality=this.webpackJsonppersonality||[]).push([[0],{44:function(e,t,a){e.exports=a(74)},49:function(e,t,a){},51:function(e,t,a){},74:function(e,t,a){"use strict";a.r(t);var r=a(1),n=a.n(r),l=a(28),s=a.n(l),o=(a(49),a(50),a(51),a(85)),c=a(9),i=a(24),u=a(13),m=a.n(u),d=a(17),p=a(19),h=a(20),y=a(23),f=a(22),v=a(29),g=a.n(v);g.a.initializeApp({apiKey:"AIzaSyCJG21FTfLkdbSSffRbCWUkhsUCz8fjFzA",authDomain:"personality-2a30d.firebaseapp.com",databaseURL:"https://personality-2a30d.firebaseio.com"});g.a.auth;var E=g.a.database(),b=a(75),S=function(e){var t=e.players;return n.a.createElement(b.a,{striped:!0},n.a.createElement("thead",null,n.a.createElement("tr",null,n.a.createElement("th",null,"Sr.No."),n.a.createElement("th",null,"Name"),n.a.createElement("th",null,"Correct guesses"))),n.a.createElement("tbody",null,t.map((function(e,t){return n.a.createElement("tr",{key:e.id},n.a.createElement("th",{scope:"row"},t+1),n.a.createElement("td",null,e.name),n.a.createElement("td",null,e.totalCorrectGuess))}))))},w=a(77),I=a(78),k=a(79),P=a(76),C=a(80),j=a(81),O=a(82),G=a(83),N=a(84),x=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(e.length===Object.keys(t).length)return null;var a=e.filter((function(e){return!t[e.playerId]})),r=a.length,n=Math.floor(Math.random()*r);return a[n]},L=function(e){var t=0,a=0,r=0;e.forEach((function(e){switch(e.currentGuess){case"1":t++,r++;break;case"2":a++,r++;break;default:return}}));var n=e.length-1;return[n>0?Math.round(100*parseInt(t)/n):0,n>0?Math.round(100*parseInt(a)/n):0,n>0?Math.round(100*parseInt(r)/n):0]},R=function(e){Object(y.a)(a,e);var t=Object(f.a)(a);function a(e){var r;return Object(p.a)(this,a),(r=t.call(this,e)).state={displayName:e.names[0]},r.iterator=0,r}return Object(h.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.timerId=setInterval((function(){e.setState({displayName:e.props.names[e.iterator++%e.props.names.length]})}),100),this.props.duration&&setTimeout((function(){clearInterval(e.timerId)}),this.props.duration)}},{key:"render",value:function(){return n.a.createElement("div",{className:"animated-text"},this.state.displayName)}}]),a}(r.Component),z=function(e){Object(y.a)(a,e);var t=Object(f.a)(a);function a(e){var r;return Object(p.a)(this,a),(r=t.call(this,e)).state={timeLeft:120},r.timerId=null,r}return Object(h.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.timerId=setInterval((function(){e.state.timeLeft<0?clearInterval(e.timerId):e.setState((function(e){return{timeLeft:e.timeLeft-1}}))}),1e3)}},{key:"componentWillUnmount",value:function(){this.timerId&&clearInterval(this.timerId)}},{key:"render",value:function(){var e=this.props.disabled||this.state.timeLeft<0,t=this.state.timeLeft%60,a=Math.floor(this.state.timeLeft/60);return n.a.createElement(P.a,{color:"primary",size:"lg",active:!0,onClick:this.props.onClick,disabled:e},this.props.label,!e&&" in ".concat(a,":").concat(t))}}]),a}(r.Component),U=function(e){Object(y.a)(a,e);var t=Object(f.a)(a);function a(e){var r;Object(p.a)(this,a),(r=t.call(this,e)).hasValidPlayerChecked=!1,r.updatePlayers=function(e){var t=[];if(e.forEach((function(e){var a=e.val();t.push(a),r.state.game&&r.state.game.pollStarted})),t=t.sort((function(e,t){return parseInt(t.totalCorrectGuess)-parseInt(e.totalCorrectGuess)})),!r.hasValidPlayerChecked&&r.state.hasPlayerSession&&null===r.state.playerId){var a=t.find((function(e){return e.playerId===r.state.hasPlayerSession}));a?r.setState({playerId:a.playerId,showLoader:!1}):(localStorage.removeItem("player-session-personality"),r.setState({showLoader:!1})),r.hasValidPlayerChecked=!0}r.setState({players:t})},r.updateStatements=function(e){var t=[];e.forEach((function(e){t.push(e.val())}));var a=t.some((function(e){return e.isLie}));r.setState({statements:t,resultDeclare:a})},r.handlePlayerNameChange=function(e){r.setState({playerName:e.target.value})},r.handleLogin=function(){var e=Object(d.a)(m.a.mark((function e(t){var a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),r.setState({writeError:null}),e.prev=2,!(a=E.ref().child("players").push().key)){e.next=11;break}return e.next=7,E.ref("players/"+a).set({playerId:a,name:r.state.playerName,currentGuess:0,totalCorrectGuess:0,lockedGuess:!1,timestamp:Date.now()});case 7:localStorage.setItem("player-session-personality",a),r.setState({playerName:"",playerId:a,hasPlayerSession:a}),e.next=12;break;case 11:r.setState({writeError:"Please try again..."});case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(2),r.setState({writeError:e.t0.message});case 17:case"end":return e.stop()}}),e,null,[[2,14]])})));return function(t){return e.apply(this,arguments)}}(),r.handleStatementChange=function(){var e=Object(d.a)(m.a.mark((function e(t){var a,n,l,s;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.target,n=a.name,l=a.value,r.setState(Object(i.a)({},n,l)),1!==l.length){e.next=13;break}return r.setState({writeError:null}),s=n.split("_")[1],e.prev=5,e.next=8,E.ref("statements/"+s).update({isTyping:!0});case 8:e.next=13;break;case 10:e.prev=10,e.t0=e.catch(5),r.setState({writeError:e.t0.message});case 13:case"end":return e.stop()}}),e,null,[[5,10]])})));return function(t){return e.apply(this,arguments)}}(),r.handleStatementBlur=function(){var e=Object(d.a)(m.a.mark((function e(t){var a,n,l,s;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.target,n=a.name,l=a.value,r.setState({writeError:null}),s=n.split("_")[1],e.prev=3,e.next=6,E.ref("statements/"+s).update({id:s,value:l,isTyping:!1});case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(3),r.setState({writeError:e.t0.message});case 11:case"end":return e.stop()}}),e,null,[[3,8]])})));return function(t){return e.apply(this,arguments)}}(),r.startPoll=Object(d.a)(m.a.mark((function e(){var t,a,n,l,s;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t={},r.setState({writeError:null}),a=r.state,n=a.game,l=a.players,s=a.playerId;try{t["/game"]=Object(c.a)(Object(c.a)({},n),{},{pollStarted:!0}),l.forEach((function(e){var a=Object(c.a)(Object(c.a)({},e),{},{lockedGuess:!1});e.playerId&&e.playerId!=s?t["/players/"+e.playerId]=a:console.log("wrong player",e)})),E.ref().update(t)}catch(o){r.setState({writeError:o.message})}case 4:case"end":return e.stop()}}),e)}))),r.handleSubmitLie=function(){r.setState({writeError:null});try{var e=r.state,t=e.playerId,a=e.players,n=e.guess,l=e.playedPlayerIds,s=e.currentPlayer,o=e.statements,u=e.game,m={1:Object(c.a)(Object(c.a)({},o[0]),{},{isLie:1==n}),2:Object(c.a)(Object(c.a)({},o[1]),{},{isLie:2==n})},d={};d["/statements"]=m,a.forEach((function(e){var a=e.currentGuess==n?parseInt(e.totalCorrectGuess)+1:e.totalCorrectGuess,r=Object(c.a)(Object(c.a)({},e),{},{totalCorrectGuess:a});e.playerId&&e.playerId!=t?d["/players/"+e.playerId]=r:console.log("wrong player",e)}));var p=Object(c.a)(Object(c.a)({},l),{},Object(i.a)({},s.playerId,!0));d.playedPlayerIds=p,d.game=Object(c.a)(Object(c.a)({},u),{},{showResult:!0}),E.ref().update(d)}catch(h){r.setState({writeError:h.message})}},r.handleChooseNextPlayer=function(){r.setState({writeError:null});try{var e=r.state,t=e.players,a=e.game,n={};n["/game"]=Object(c.a)(Object(c.a)({},a),{},{gameStarted:!0,choosingPlayer:!0,showResult:!1}),n["/currentPlayer"]=null,E.ref().update(n),setTimeout(Object(d.a)(m.a.mark((function e(){var n,l,s;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=r.state.playedPlayerIds?r.state.playedPlayerIds:{},l=x(r.state.players,n),r.setState({writeError:null}),s={};try{s["/currentPlayer"]=l,s["/game"]=Object(c.a)(Object(c.a)({},a),{},{gameStarted:!0,showResult:!1,choosingPlayer:!1,pollStarted:!0}),t.forEach((function(e){var t=Object(c.a)(Object(c.a)({},e),{},{currentGuess:null,lockedGuess:!1});e.playerId?s["/players/"+e.playerId]=t:console.log("wrong player",e)})),E.ref().update(s)}catch(o){r.setState({writeError:o.message})}case 5:case"end":return e.stop()}}),e)}))),5e3)}catch(l){r.setState({writeError:l.message})}},r.handleGuess=function(e){r.setState({guess:e.target.value})},r.handleSubmitGuess=Object(d.a)(m.a.mark((function e(){var t,a,n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.state,a=t.guess,n=t.playerId,r.setState({writeError:null}),e.prev=2,e.next=5,E.ref("players/"+n).update({currentGuess:a,lockedGuess:!0});case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),r.setState({writeError:e.t0.message});case 10:case"end":return e.stop()}}),e,null,[[2,7]])}))),r.renderAnimation=function(e){return n.a.createElement("div",null,n.a.createElement(R,{names:e.map((function(e){return e.name})),duration:5e3}))},r.renderChosenPlayerPollStartedUI=function(e,t,a,l,s,o,c){var i=[0,0,0];return c.length>0&&l.pollStarted&&(i=L(c)),n.a.createElement(n.a.Fragment,null,n.a.createElement("p",null,a.name,"'s personality looks like?"),n.a.createElement(w.a,null,s.map((function(e){return n.a.createElement(I.a,{active:o==e.id,key:e.id,tag:"label",for:e.id,action:!0,disabled:l.showResult},n.a.createElement("input",{type:"radio",id:e.id,name:"guess",value:e.id,checked:o==e.id,onChange:r.handleGuess,className:"invisible"}),n.a.createElement("label",{for:e.id},e.value),l.showResult&&n.a.createElement("div",{className:"progress-wrapper"},n.a.createElement(k.a,{animated:!0,color:"info",value:i[parseInt(e.id)-1]},i[parseInt(e.id)-1],"%/")))}))),n.a.createElement("div",{className:"total-guesses"},n.a.createElement("div",null,"Total guesses:"),n.a.createElement(k.a,{animated:!0,color:"info",value:i[2]},i[2],"%")),!l.showResult&&n.a.createElement(P.a,{color:"primary",size:"lg",active:!0,onClick:r.handleSubmitLie},"Reveal"),l.showResult&&n.a.createElement(P.a,{color:"primary",size:"lg",active:!0,onClick:r.handleChooseNextPlayer},"Choose the next player"))},r.renderChosenPlayerBeforePollStartUI=function(e,t){return n.a.createElement(n.a.Fragment,null," ",n.a.createElement("p",null,"What are you statements ?"),n.a.createElement(w.a,null,n.a.createElement(I.a,{tag:"label",for:"1",action:!0},n.a.createElement(C.a,{type:"text",onChange:r.handleStatementChange,onBlur:r.handleStatementBlur,name:"statement_1",value:e})),n.a.createElement(I.a,{tag:"label",for:"2",action:!0},n.a.createElement(C.a,{type:"text",onChange:r.handleStatementChange,onBlur:r.handleStatementBlur,name:"statement_2",value:t}))),n.a.createElement(P.a,{color:"primary",size:"lg",active:!0,onClick:r.startPoll,disabled:""===e||""===t},"Start Guess"))},r.renderNonChosenPlayerUI=function(e,t,a,l,s,c,i){if(s.every((function(e){return""==e.value})))return n.a.createElement("div",{className:"chosen-player-name"},a.name);var u="",m="",d=[0,0,0];if(l.showResult){var p=s.find((function(e){return e.isLie}));p&&t.currentGuess==p.id?(u="success",m="Great.....you guessed it!"):(u="danger",m="Better luck next time!"),d=L(i)}return n.a.createElement(n.a.Fragment,null,l.showResult&&n.a.createElement(o.a,{color:u},m),n.a.createElement("p",null,a.name,"'s personality looks like?"),n.a.createElement(w.a,null,s.map((function(s){return n.a.createElement(I.a,{active:c==s.id,key:s.id,tag:"label",for:s.id,action:!0,color:l.showResult&&s.isLie?"success":"none",disabled:a&&a.playerId===e||!!t&&t.lockedGuess},n.a.createElement("input",{type:"radio",id:s.id,name:"guess",value:s.id,checked:c==s.id,onChange:r.handleGuess,className:"invisible"}),n.a.createElement("label",{for:s.id},s.isTyping?"typing...":s.value),l.showResult&&n.a.createElement("div",{className:"progress-wrapper"},n.a.createElement(k.a,{animated:!0,color:"info",value:d[parseInt(s.id)-1]},d[parseInt(s.id)-1],"%")))}))),n.a.createElement(z,{onClick:r.handleSubmitGuess,disabled:!!t&&(t.lockedGuess||!l.pollStarted||l.showResult),label:t&&t.lockedGuess&&l.pollStarted?"Your guess is submitted":"Submit Guess"}))},r.renderLoginUI=function(e,t){return n.a.createElement("form",{onSubmit:r.handleLogin},n.a.createElement(j.a,null,n.a.createElement(O.a,{for:"userName"},"What is your good name?"),n.a.createElement(C.a,{type:"text",name:"name",id:"userName",placeholder:"Name",onChange:r.handlePlayerNameChange,value:e})),t?n.a.createElement("p",null,t):null,n.a.createElement(P.a,{color:"primary",size:"lg",active:!0,type:"submit",disabled:!e},"Start Playing"))};var l=localStorage.getItem("player-session-personality");return r.state={playerName:"",playerId:null,readError:null,writeError:null,showLoader:!!l,hasPlayerSession:l,statement_1:"",statement_2:"",guess:null,players:[],playedPlayerIds:null,currentPlayer:null,statements:null,game:null},r}return Object(h.a)(a,[{key:"componentDidMount",value:function(){var e=Object(d.a)(m.a.mark((function e(){var t=this;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.setState({readError:null});try{E.ref("players").on("value",this.updatePlayers),E.ref("statements").on("value",this.updateStatements),E.ref("currentPlayer").on("value",(function(e){var a=e.val();t.setState({currentPlayer:a,guess:0})})),E.ref("game").on("value",(function(e){var a=e.val();t.setState({game:a})})),E.ref("playedPlayerIds").on("value",(function(e){var a=e.val();t.setState({playedPlayerIds:a})}))}catch(a){this.setState({readError:a.message})}case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e,t=this.state,a=t.showLoader,r=t.players,l=t.hasPlayerSession,s=t.playerId,o=t.playerName,c=t.writeError,i=t.game,u=t.guess,m=t.currentPlayer,d=t.statements,p=t.statement_1,h=t.statement_2,y=t.playedPlayerIds;if(a)e=n.a.createElement("div",{className:"loader"},n.a.createElement(G.a,{style:{width:"5rem",height:"5rem"}}));else{var f=r.find((function(e){return e.playerId===s}));e=l&&s?i&&i.gameStarted?i.choosingPlayer?this.renderAnimation(r):null!==m&&m.playerId===s?i.pollStarted?this.renderChosenPlayerPollStartedUI(s,f,m,i,d,u,r):this.renderChosenPlayerBeforePollStartUI(p,h):m?this.renderNonChosenPlayerUI(s,f,m,i,d,u,r):y&&r.length===Object.keys(y).length?"Game Over!":n.a.createElement(P.a,{color:"primary",size:"lg",active:!0,onClick:this.handleChooseNextPlayer},"Lets give it one more try"):null===m&&i&&i.gameStarter===s?n.a.createElement(P.a,{color:"primary",size:"lg",active:!0,onClick:this.handleChooseNextPlayer},"Start Game"):n.a.createElement("div",null,"Game will begin soon..."):this.renderLoginUI(o,c)}return n.a.createElement(N.a,{className:"admin-wrapper"},n.a.createElement("div",{className:"statement-wrapper"},e),l&&s&&n.a.createElement("div",{className:"players-list"},n.a.createElement(S,{players:this.state.players})))}}]),a}(r.Component),B=a(42),M=a(8);var T=function(){return n.a.createElement("div",{className:"container-fluid"},n.a.createElement(o.a,{color:"primary"},n.a.createElement("h1",null,"Welcome to Frontdoor's Cross Functional Team Game zone! ")),n.a.createElement(B.a,null,n.a.createElement(M.c,null,n.a.createElement(M.a,{exact:!0,path:"/personality",component:U}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(n.a.createElement(n.a.StrictMode,null,n.a.createElement(T,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[44,1,2]]]);
//# sourceMappingURL=main.8b70f21c.chunk.js.map